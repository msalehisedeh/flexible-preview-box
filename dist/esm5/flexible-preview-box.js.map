{
  "version": 3,
  "file": "flexible-preview-box.js",
  "sources": [
    "ng://flexible-preview-box/out/src/app/flexible-preview-box/flexible-preview-box.module.ts",
    "ng://flexible-preview-box/out/src/app/flexible-preview-box/components/flexible-preview-box.component.ts"
  ],
  "sourcesContent": [
    "import { NgModule, CUSTOM_ELEMENTS_SCHEMA } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { IntoPipeModule } from 'into-pipes';\r\n\r\nimport { FlexiblePreviewBoxComponent } from './components/flexible-preview-box.component';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    IntoPipeModule\r\n  ],\r\n  declarations: [\r\n    FlexiblePreviewBoxComponent\r\n  ],\r\n  exports: [\r\n    FlexiblePreviewBoxComponent\r\n  ],\r\n  entryComponents: [\r\n  ],\r\n  schemas: [CUSTOM_ELEMENTS_SCHEMA]\r\n})\r\n\r\nexport class FlexiblePreviewBoxModule {}\r\n",
    "\r\nimport {\r\n  Component,\r\n  OnInit,\r\n  OnChanges,\r\n  Input,\r\n  Output,\r\n  ViewChild,\r\n  ElementRef,\r\n  EventEmitter\r\n} from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'flexible-preview-box',\r\n  template: `<div class=\"above-viewport\" [style.max-width]=\"effects.width ? (effects.width + 'px') : 'auto'\">\r\n    <div *ngFor=\"let row of aboveData\" \r\n        class=\"box-row\"\r\n        [style.margin-top]=\"row.spacing ? (row.spacing + 'px') : '0'\"\r\n        [class.left]=\"row.side === 'left'\"\r\n        [class.right]=\"row.side === 'right'\"\r\n        [class.center]=\"row.side === 'center'\"\r\n        [class.emphasize]=\"row.emphasize\"\r\n        [class.side-by-side]=\"row.sidebyside\">\r\n        <span class=\"label\" [class.off-screen]=\"row.hidelabel\" [textContent]=\"row.value\"></span>\r\n        <span class=\"value\" [intoName]=\"row.value\"\r\n            [intoId]=\"row.key + '-' + i\"\r\n            [into]=\"row.format\"\r\n            [intoData]=\"item\"\r\n            [rawContent]=\"rowContent(row)\"\r\n            [onComponentChange]=\"onComponentChange.bind(this)\"></span>\r\n    </div>\r\n    <div class=\"clearblock\"></div>\r\n</div>\r\n<div \r\n    class=\"viewport\" \r\n    tabindex=\"0\"\r\n    [title]=\"item.name\"\r\n    [style.width]=\"effects.width + 'px'\" \r\n    [style.height]=\"effects.height + 'px'\"\r\n    (keyup)=\"keyup($event)\"\r\n    (click)=\"selectItem($event)\"\r\n    (mouseout)=\"hoverOut($event)\"\r\n    (mouseover)=\"hoverOver($event)\"\r\n    (mousemove)=\"hoverViewPort($event)\">\r\n    <img  class=\"content\" \r\n            [src]=\"viewport.src.small\" \r\n            *ngIf=\"viewport.type === 'image'\" />\r\n    <img  class=\"hover\" #largeImage\r\n            [style.width]=\"(effects.width*2) + 'px'\"\r\n            [style.height]=\"(effects.height*2) + 'px'\"\r\n            [src]=\"viewport.src.large\" \r\n            *ngIf=\"effects.zoomOnHover\" />\r\n    <video  \r\n        class=\"content\" #video\r\n        [style.width]=\"effects.width + 'px'\" \r\n        [style.height]=\"effects.height + 'px'\"\r\n        (play)=\"videoPlayed(video.currentTime)\"\r\n        (pause)=\"videoPaused(video.currentTime)\"\r\n        (ended)=\"videoEnded(video.currentTime)\"\r\n        *ngIf=\"viewport.type === 'video'\" controls>\r\n        <source [src]=\"viewport.src.mp4\" type=\"video/mp4\">\r\n        <source [src]=\"viewport.src.webm\" type=\"video/webm\">\r\n        <source [src]=\"viewport.src.egg\" type=\"video/ogg\">\r\n    </video>\r\n</div>\r\n<div class=\"below-viewport\" [style.max-width]=\"effects.width ? (effects.width + 'px') : 'auto'\">\r\n    <div *ngFor=\"let row of belowData\" \r\n        class=\"box-row\"\r\n        [style.margin-top]=\"row.spacing ? (row.spacing + 'px') : '0'\"\r\n        [class.left]=\"row.side === 'left'\"\r\n        [class.right]=\"row.side === 'right'\"\r\n        [class.center]=\"row.side === 'center'\"\r\n        [class.emphasize]=\"row.emphasize\"\r\n        [class.side-by-side]=\"row.sidebyside\">\r\n        <span class=\"label\" [class.off-screen]=\"row.hidelabel\" [textContent]=\"row.value\"></span>\r\n        <span class=\"value\" [intoName]=\"row.value\"\r\n            [intoId]=\"row.key + '-' + i\"\r\n            [into]=\"row.format\"\r\n            [intoData]=\"item\"\r\n            [rawContent]=\"rowContent(row)\"\r\n            [onComponentChange]=\"onComponentChange.bind(this)\"></span>\r\n    </div>\r\n    <div class=\"clearblock\"></div>\r\n</div>`,\r\n  styles: [`:host{background-color:#fff;border:1px solid #ced4da;-webkit-box-sizing:border-box;box-sizing:border-box;display:table;min-height:50px;padding:0;border-radius:5px;margin:5px}:host ::ng-deep .rating{color:red}:host .off-screen{display:block;float:left;height:0;overflow:hidden;text-indent:-99999px;width:0}:host .box-row{display:-webkit-box;display:-ms-flexbox;display:flex;width:100%}:host .box-row .label{float:left;font-weight:700;margin-right:5px}:host .box-row .value{float:left}:host .box-row.left{text-align:left}:host .box-row.right .label{font-weight:700;-webkit-box-flex:1;-ms-flex:1;flex:1;text-align:right}:host .box-row.center{width:inherit;display:table;margin:auto}:host .box-row.emphasize{font-weight:700;font-size:1.8rem}:host .box-row.side-by-side{max-width:250px;width:inherit;display:table;float:right;margin:0 5px}:host .above-viewport{padding:5px;-webkit-box-sizing:border-box;box-sizing:border-box}:host .viewport{border-color:#880500;-webkit-box-sizing:border-box;box-sizing:border-box;border-top:1px solid #bcd;border-bottom:1px solid #bcd;min-height:150px;overflow:hidden;position:relative;margin:0 auto;box-sizing:border-box}:host .viewport img.content{margin:auto;display:table}:host .viewport video.content{margin:auto;display:table}:host .viewport .hover{position:absolute;background-color:#fff;top:-10000px;left:-10000px;opacity:0;pointer-events:none}:host .viewport:hover{border-color:#f1523c}:host .below-viewport{padding:5px;-webkit-box-sizing:border-box;box-sizing:border-box}.clearblock{clear:both;display:block;width:100%;height:0;padding:0;margin:0}:host:focus{border-color:#0ba}:host:hover{border-color:#f1523c}`],\r\n})\r\nexport class FlexiblePreviewBoxComponent implements OnInit, OnChanges {\r\n  \r\n  aboveData = [];\r\n  belowData = [];\r\n  \r\n  @ViewChild(\"largeImage\")\r\n\tprivate largeImage: ElementRef;\r\n\r\n  @Output(\"onselect\")\r\n  onselect= new EventEmitter()\r\n\r\n  @Input(\"item\")\r\n  item: any;\r\n\r\n  @Input(\"viewport\")\r\n  viewport: any;\r\n  \r\n  @Input(\"metadata\")\r\n  metadata: any[];\r\n\r\n  @Input(\"effects\")\r\n  effects: any;\r\n\r\n  constructor() {\t  \r\n  }\r\n\r\n  ngOnInit() {\r\n    if (this.metadata) {\r\n      this.metadata.map ( (data) => {\r\n        if (data.position === 'above') {\r\n          this.aboveData.push(data);\r\n        }else if (data.position === 'below') {\r\n          this.belowData.push(data);\r\n        }\r\n      })\r\n    }\r\n  }\r\n\r\n  ngOnChanges(changes) {\r\n\r\n  }\r\n\r\n  private itemValue(item, hpath) {\r\n\t\tlet subitem = item;\r\n\t\thpath.map( (subkey) => {\r\n\t\t\tif (subitem) {\r\n\t\t\t\tsubitem = subitem[subkey];\r\n\t\t\t}\r\n\t\t})\r\n\t\treturn subitem === undefined || subitem === null || subitem === \"null\" ? \"\" : String(subitem);\r\n\t}\r\n\r\n  rowContent(row) {\r\n    let content = this.itemValue(this.item, row.key.split(\".\"));\r\n    return (content !== undefined && content != null) ? content : '';\r\n  }\r\n\r\n  hoverOver(event) {\r\n\t\tif (this.largeImage && this.effects.zoomOnHover && event.target.nodeName === 'IMG') {\r\n\r\n    }\r\n\t}\r\n\thoverOut(event) {\r\n\t\tif (this.largeImage) {\r\n\t\t\tthis.largeImage.nativeElement.style.opacity = 0;\r\n\t\t\tthis.largeImage.nativeElement.style.top = \"-10000px\";\r\n\t\t\tthis.largeImage.nativeElement.style.left = \"-10000px\";\r\n\t\t}\r\n\t}\r\n\thoverViewPort(event) {\r\n\t\tif (this.largeImage && this.effects.zoomOnHover) {\r\n\t\t\tthis.largeImage.nativeElement.style.opacity = 1;\r\n\t\t\tthis.largeImage.nativeElement.style.top = -event.layerY + \"px\";\r\n\t\t\tthis.largeImage.nativeElement.style.left = -event.layerX + \"px\";\r\n\t\t}\r\n\t}\r\n\r\n  keyup(event) {\r\n    const code = event.which;\r\n\r\n    if (code === 13) {\r\n      event.target.click();\r\n    }\r\n  }\r\n  selectItem(event) {\r\n    this.onselect.emit({\r\n      item: this.item,\r\n      selected: true,\r\n      action: \"redirect\"\r\n    });\r\n  }\r\n  videoPlayed(trackingTime) { \r\n  }\r\n  videoPaused(trackingTime) {\r\n\r\n  }\r\n  videoEnded(trackingTime) {\r\n\r\n  }\r\n  onComponentChange(event) {\r\n    this.onselect.emit(event);\r\n  }\r\n}\r\n"
  ],
  "names": [],
  "mappings": "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"
}
